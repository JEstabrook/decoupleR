---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
    collapse = TRUE,
    comment = "#>",
    fig.path = "man/figures/README-",
    out.width = "100%"
)
```

# decoupleR

<!-- badges: start -->
[![Build Status](https://travis-ci.com/saezlab/decoupleR.svg?token=PagY1pyvMyyL3AJHRy5V&branch=master)](https://travis-ci.com/saezlab/decoupleR)
[![Lifecycle:experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Codecov test coverage](https://codecov.io/gh/saezlab/decoupleR/branch/master/graph/badge.svg)](https://codecov.io/gh/saezlab/decoupleR?branch=master)
<!-- badges: end -->

> a community effort by [saezlab](http://saezlab.org) members

## Overview

**Under development** - decoupleR aims to combine various gene sets 
resources with a variety of statistics for functional genomics analyses. 

## Installation

```{r installation, eval = FALSE}
# install the development version from GitHub
# install.packages("devtools")
devtools::install_github("saezlab/decoupleR")
devtools::install_github("saezlab/decoupleR@devel-jesus")
```

## Usage

### Load packaga and data

```{r usage-load_data, message=FALSE}
library(decoupleR)

inputs_dir <- system.file("testdata", "inputs", package = "decoupleR")

mat <- file.path(inputs_dir, "input-expr_matrix.rds") %>%
    readRDS() %>%
    dplyr::glimpse()

network <- file.path(inputs_dir, "input-dorothea_genesets.rds") %>%
    readRDS() %>%
    dplyr::glimpse()
```

### Decouple wrapper

`decouple()` allows access to all **decoupleR** available statistics in one place.
Statistic functions inside **decoupleR** always return a tidy tibble that can be
easily processed with the tools provide by the [tidyverse ecosystem](https://www.tidyverse.org/).

```{r usage-decouple_function, message=FALSE}
decouple(
    mat = mat,
    network = network,
    .source = "tf",
    .target = "target",
    statistics = c("gsva", "mean", "pscira", "scira", "viper"),
    args = list(
        gsva = list(verbose = FALSE),
        mean = list(.mor = "mor", .likelihood = "likelihood"),
        pscira = list(.mor = "mor"),
        scira = list(.mor = "mor"),
        viper = list(.mor = "mor", .likelihood = "likelihood", verbose = FALSE)
    )
)
```

### Individual parts

In turn, we recognize that the use of individual statistics may be of interest.
Therefore, these are also exported and ready for use. All statistics follow the
same design pattern and arguments, so moving between statistics could be very comfortable.

```{r}
# viper call is equivalent to the one made by decouple() above.
run_viper(
    mat = mat,
    network = network,
    .source = "tf",
    .target = "target",
    .likelihood = "likelihood",
    verbose = FALSE
)
```

## Contributing to decoupleR

Are you interested in adding a new statistical method or collaborating in the development of internal tools that allow the extension of the package? Please check out our [contribution guide](https://saezlab.github.io/decoupleR/CONTRIBUTING.html).

---

Please note that this project is released with a [Contributor Code of Conduct](https://saezlab.github.io/decoupleR/CODE_OF_CONDUCT).
By participating in this project you agree to abide by its terms.
