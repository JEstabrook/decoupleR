---
title: "Introduction to decoupleR"
author:
  - name: Jesús Vélez
    affiliation:
    - National Autonomous University of Mexico
    email: jvelez@lcg.unam.mx
output: 
  BiocStyle::html_document:
    self_contained: true
    toc: true
    toc_float: true
    toc_depth: 3
    code_folding: show
package: "`r pkg_ver('decoupleR')`"
vignette: >
  %\VignetteIndexEntry{Introduction to decoupleR}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
    collapse = TRUE,
    comment = "#>"
)
```

# Basics

## Install `decoupleR`

`R` is an open-source statistical environment which can be easily modified to
enhance its functionality via packages. `r Biocpkg("decoupleR")` is a `R`
package available via the [Bioconductor](http://bioconductor.org) repository 
for packages. `R` can be installed on any operating system from
[CRAN](https://cran.r-project.org/) after which you can install
`r Biocpkg("decoupleR")` by using the following commands in your `R` session:

```{r bioconductor_install, eval=FALSE}
if (!requireNamespace("BiocManager", quietly = TRUE)) {
    install.packages("BiocManager")
}

BiocManager::install("decoupleR")

# Check that you have a valid Bioconductor installation
BiocManager::valid()
```

You can install the development version from [GitHub](https://github.com/) with:

```{r github_install, eval=FALSE}
# install.packages("devtools")
devtools::install_github("saezlab/decoupleR")
devtools::install_github("saezlab/decoupleR@devel-jesus")
```

## Required knowledge

`r Biocpkg("decoupleR")` is based on many other packages and in particular in 
those that have implemented the infrastructure needed for dealing with
functional enrichment analysis. That is, packages like `r Biocpkg("viper")` or 
`r Biocpkg("GSVA")`, among others. This in order to have a centralized place from which to
apply different statistics to the same data set without the need and work that
would require testing in isolation. Opening the possibility of make benchmarks
with easy extension.

## Asking for help

As package developers, we try to explain clearly how to use our packages and in
which order to use the functions. But `R` and `Bioconductor` have a steep
learning curve so it is critical to learn where to ask for help.
We would like to highlight the
[Bioconductor support site](https://support.bioconductor.org/) as the main
resource for getting help: remember to use the `decoupleR` tag and check 
[the older posts](https://support.bioconductor.org/t/decoupleR/).
Other alternatives are available such as creating GitHub issues and tweeting.
However, please note that if you want to receive help you should adhere to the
[posting guidelines](http://www.bioconductor.org/help/support/posting-guide/).
It is particularly critical that you provide a small reproducible example and
your session information so package developers can track down the source of
the error.

## Citing `decoupleR`

We hope that `r Biocpkg("decoupleR")` will be useful for your research.
Please use the following information to cite the package and the overall
approach. Thank you!

```{r decoupleR citation}
citation("decoupleR")
```


# Quick start to using to `decoupleR`

```{r load_library, message=FALSE}
library(decoupleR)
```

```{r read_example_data}
inputs_dir <- system.file("testdata", "inputs", package = "decoupleR")

mat <- file.path(inputs_dir, "input-expr_matrix.rds") %>%
    readRDS() %>%
    dplyr::glimpse()

network <- file.path(inputs_dir, "input-dorothea_genesets.rds") %>%
    readRDS() %>%
    dplyr::glimpse()
```

```{r usage-decouple_function, message=FALSE}
decouple(
    mat = mat,
    network = network,
    .source = "tf",
    .target = "target",
    statistics = c("gsva", "mean", "pscira", "scira", "viper"),
    args = list(
        gsva = list(verbose = FALSE),
        mean = list(.mor = "mor", .likelihood = "likelihood"),
        pscira = list(.mor = "mor"),
        scira = list(.mor = "mor"),
        viper = list(.mor = "mor", .likelihood = "likelihood", verbose = FALSE)
    )
)
```

# Session information

```{r session_info, echo=FALSE}
sessioninfo::session_info()
```

